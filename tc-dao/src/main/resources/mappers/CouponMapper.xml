<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yz.tc.dao.CouponMapper">
    <resultMap id="BaseResultMap" type="com.yz.tc.model.Coupon">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="owner_type" property="ownerType" jdbcType="TINYINT"/>
        <result column="owner_id" property="ownerId" jdbcType="VARCHAR"/>
        <result column="owner_name" property="ownerName" jdbcType="VARCHAR"/>
        <result column="activity_id" property="activityId" jdbcType="INTEGER"/>
        <result column="coupon_name" property="couponName" jdbcType="VARCHAR"/>
        <result column="coupon_use_type" property="couponUseType" jdbcType="TINYINT"/>
        <result column="coupon_no" property="couponNo" jdbcType="VARCHAR"/>
        <result column="price" property="price" jdbcType="DECIMAL"/>
        <result column="coupon_package_id" property="couponPackageId" jdbcType="INTEGER"/>
        <result column="per_person_limit" property="perPersonLimit" jdbcType="INTEGER"/>
        <result column="per_order_limit" property="perOrderLimit" jdbcType="INTEGER"/>
        <result column="coupon_type_id" property="couponTypeId" jdbcType="TINYINT"/>
        <result column="start_time" property="startTime" jdbcType="TIMESTAMP"/>
        <result column="end_time" property="endTime" jdbcType="TIMESTAMP"/>
        <result column="pending_time" property="pendingTime" jdbcType="TIMESTAMP"/>
        <result column="is_shared_subpromotion" property="isSharedSubpromotion" jdbcType="BIT"/>
        <result column="is_shared_coupon" property="isSharedCoupon" jdbcType="BIT"/>
        <result column="redirect_type" property="redirectType" jdbcType="TINYINT"/>
        <result column="redirect_url" property="redirectUrl" jdbcType="VARCHAR"/>
        <result column="is_must_apply" property="isMustApply" jdbcType="BIT"/>
        <result column="afford_cost_type" property="affordCostType" jdbcType="TINYINT"/>
        <result column="afford_cost_value" property="affordCostValue" jdbcType="DECIMAL"/>
        <result column="coupon_dispatch_type" property="couponDispatchType" jdbcType="TINYINT"/>
        <result column="issue_start_time" property="issueStartTime" jdbcType="TIMESTAMP"/>
        <result column="issue_end_time" property="issueEndTime" jdbcType="TIMESTAMP"/>
        <result column="issued_total_amount" property="issuedTotalAmount" jdbcType="INTEGER"/>
        <result column="scope_type" property="scopeType" jdbcType="TINYINT"/>
        <result column="promotion_amount" property="promotionAmount" jdbcType="DECIMAL"/>
        <result column="order_full_amount" property="orderFullAmount" jdbcType="DECIMAL"/>
        <result column="promotion_max_amount" property="promotionMaxAmount" jdbcType="DECIMAL"/>
        <result column="discount_amount" property="discountAmount" jdbcType="DECIMAL"/>
        <result column="gift_name" property="giftName" jdbcType="VARCHAR"/>
        <result column="promotion_scope_amount" property="promotionScopeAmount" jdbcType="VARCHAR"/>
        <result column="apply_audit_name" property="applyAuditName" jdbcType="VARCHAR"/>
        <result column="apply_audit_time" property="applyAuditTime" jdbcType="TIMESTAMP"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="create_user" property="createUser" jdbcType="VARCHAR"/>
        <result column="create_user_name" property="createUserName" jdbcType="VARCHAR"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="update_user" property="updateUser" jdbcType="VARCHAR"/>
        <result column="update_user_name" property="updateUserName" jdbcType="VARCHAR"/>
        <result column="is_deleted" property="isDeleted" jdbcType="BIT"/>
        <result column="status" property="status" jdbcType="TINYINT"/>
        <result column="audit_status" property="auditStatus" jdbcType="TINYINT"/>
        <result column="rebate_sender" property="rebateSender" jdbcType="TINYINT"/>
        <result column="ext_relation_id" property="extRelationId" jdbcType="VARCHAR"/>
        <result column="ext_relation_name" property="extRelationName" jdbcType="VARCHAR"/>
        <result column="process_data_flag" property="processDataFlag" jdbcType="TINYINT"/>
    </resultMap>
    <sql id="Example_Where_Clause">
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" suffix=")" prefixOverrides="and">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach collection="criterion.value" item="listItem" open="(" close=")"
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Example_Where_Clause">
        <where>
            <foreach collection="example.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" suffix=")" prefixOverrides="and">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach collection="criterion.value" item="listItem" open="(" close=")"
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
    id, owner_type, owner_id, owner_name, activity_id, coupon_name, coupon_use_type,
    coupon_no, price, coupon_package_id, per_person_limit, per_order_limit, coupon_type_id,
    start_time, end_time, pending_time, is_shared_subpromotion, is_shared_coupon, redirect_type,
    redirect_url, is_must_apply, afford_cost_type, afford_cost_value, coupon_dispatch_type, 
    issue_start_time, issue_end_time, issued_total_amount, scope_type, promotion_amount, 
    order_full_amount, promotion_max_amount, discount_amount, gift_name, promotion_scope_amount, 
    apply_audit_name, apply_audit_time, create_time, create_user, create_user_name, update_time, 
    update_user, update_user_name, is_deleted, status, audit_status, rebate_sender, ext_relation_id,
    ext_relation_name, process_data_flag
  </sql>
    <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.yz.tc.model.CouponExample">
        select
        <if test="distinct">
            distinct
        </if>
        'true' as QUERYID,
        <include refid="Base_Column_List"/>
        from mmc_coupon
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        select
        <include refid="Base_Column_List"/>
        from mmc_coupon
        where id = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from mmc_coupon
    where id = #{id,jdbcType=INTEGER}
  </delete>
    <delete id="deleteByExample" parameterType="com.yz.tc.model.CouponExample">
        delete from mmc_coupon
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="com.yz.tc.model.Coupon">
        <selectKey resultType="java.lang.Integer" keyProperty="id" order="AFTER">
            select LAST_INSERT_ID()
        </selectKey>
        insert into mmc_coupon (owner_type, owner_id, owner_name,
        activity_id, coupon_name, coupon_use_type,
        coupon_no, price, coupon_package_id,
        per_person_limit, per_order_limit, coupon_type_id,
        start_time, end_time, pending_time,
        is_shared_subpromotion, is_shared_coupon, redirect_type,
        redirect_url, is_must_apply, afford_cost_type,
        afford_cost_value, coupon_dispatch_type, issue_start_time,
        issue_end_time, issued_total_amount, scope_type,
        promotion_amount, order_full_amount, promotion_max_amount,
        discount_amount, gift_name, promotion_scope_amount,
        apply_audit_name, apply_audit_time, create_time,
        create_user, create_user_name, update_time,
        update_user, update_user_name, is_deleted,
        status, audit_status, rebate_sender, ext_relation_id,
        ext_relation_name, process_data_flag)
        values (#{ownerType,jdbcType=TINYINT}, #{ownerId,jdbcType=VARCHAR}, #{ownerName,jdbcType=VARCHAR},
        #{activityId,jdbcType=INTEGER}, #{couponName,jdbcType=VARCHAR}, #{couponUseType,jdbcType=TINYINT},
        #{couponNo,jdbcType=VARCHAR}, #{price,jdbcType=DECIMAL}, #{couponPackageId,jdbcType=INTEGER},
        #{perPersonLimit,jdbcType=INTEGER}, #{perOrderLimit,jdbcType=INTEGER}, #{couponTypeId,jdbcType=TINYINT},
        #{startTime,jdbcType=TIMESTAMP}, #{endTime,jdbcType=TIMESTAMP}, #{pendingTime,jdbcType=TIMESTAMP},
        #{isSharedSubpromotion,jdbcType=BIT}, #{isSharedCoupon,jdbcType=BIT}, #{redirectType,jdbcType=TINYINT},
        #{redirectUrl,jdbcType=VARCHAR}, #{isMustApply,jdbcType=BIT}, #{affordCostType,jdbcType=TINYINT},
        #{affordCostValue,jdbcType=DECIMAL}, #{couponDispatchType,jdbcType=TINYINT},
        #{issueStartTime,jdbcType=TIMESTAMP},
        #{issueEndTime,jdbcType=TIMESTAMP}, #{issuedTotalAmount,jdbcType=INTEGER}, #{scopeType,jdbcType=TINYINT},
        #{promotionAmount,jdbcType=DECIMAL}, #{orderFullAmount,jdbcType=DECIMAL},
        #{promotionMaxAmount,jdbcType=DECIMAL},
        #{discountAmount,jdbcType=DECIMAL}, #{giftName,jdbcType=VARCHAR}, #{promotionScopeAmount,jdbcType=VARCHAR},
        #{applyAuditName,jdbcType=VARCHAR}, #{applyAuditTime,jdbcType=TIMESTAMP}, #{createTime,jdbcType=TIMESTAMP},
        #{createUser,jdbcType=VARCHAR}, #{createUserName,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP},
        #{updateUser,jdbcType=VARCHAR}, #{updateUserName,jdbcType=VARCHAR}, #{isDeleted,jdbcType=BIT},
        #{status,jdbcType=TINYINT}, #{auditStatus,jdbcType=TINYINT}, #{rebateSender,jdbcType=TINYINT},
        #{extRelationId,jdbcType=VARCHAR},
        #{extRelationName,jdbcType=VARCHAR}, #{processDataFlag,jdbcType=TINYINT})
    </insert>
    <insert id="insertSelective" parameterType="com.yz.tc.model.Coupon">
        <selectKey resultType="java.lang.Integer" keyProperty="id" order="AFTER">
            select LAST_INSERT_ID()
        </selectKey>
        insert into mmc_coupon
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="ownerType != null">
                owner_type,
            </if>
            <if test="ownerId != null">
                owner_id,
            </if>
            <if test="ownerName != null">
                owner_name,
            </if>
            <if test="activityId != null">
                activity_id,
            </if>
            <if test="couponName != null">
                coupon_name,
            </if>
            <if test="couponUseType != null">
                coupon_use_type,
            </if>
            <if test="couponNo != null">
                coupon_no,
            </if>
            <if test="price != null">
                price,
            </if>
            <if test="couponPackageId != null">
                coupon_package_id,
            </if>
            <if test="perPersonLimit != null">
                per_person_limit,
            </if>
            <if test="perOrderLimit != null">
                per_order_limit,
            </if>
            <if test="couponTypeId != null">
                coupon_type_id,
            </if>
            <if test="startTime != null">
                start_time,
            </if>
            <if test="endTime != null">
                end_time,
            </if>
            <if test="pendingTime != null">
                pending_time,
            </if>
            <if test="isSharedSubpromotion != null">
                is_shared_subpromotion,
            </if>
            <if test="isSharedCoupon != null">
                is_shared_coupon,
            </if>
            <if test="redirectType != null">
                redirect_type,
            </if>
            <if test="redirectUrl != null">
                redirect_url,
            </if>
            <if test="isMustApply != null">
                is_must_apply,
            </if>
            <if test="affordCostType != null">
                afford_cost_type,
            </if>
            <if test="affordCostValue != null">
                afford_cost_value,
            </if>
            <if test="couponDispatchType != null">
                coupon_dispatch_type,
            </if>
            <if test="issueStartTime != null">
                issue_start_time,
            </if>
            <if test="issueEndTime != null">
                issue_end_time,
            </if>
            <if test="issuedTotalAmount != null">
                issued_total_amount,
            </if>
            <if test="scopeType != null">
                scope_type,
            </if>
            <if test="promotionAmount != null">
                promotion_amount,
            </if>
            <if test="orderFullAmount != null">
                order_full_amount,
            </if>
            <if test="promotionMaxAmount != null">
                promotion_max_amount,
            </if>
            <if test="discountAmount != null">
                discount_amount,
            </if>
            <if test="giftName != null">
                gift_name,
            </if>
            <if test="promotionScopeAmount != null">
                promotion_scope_amount,
            </if>
            <if test="applyAuditName != null">
                apply_audit_name,
            </if>
            <if test="applyAuditTime != null">
                apply_audit_time,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="createUser != null">
                create_user,
            </if>
            <if test="createUserName != null">
                create_user_name,
            </if>
            <if test="updateTime != null">
                update_time,
            </if>
            <if test="updateUser != null">
                update_user,
            </if>
            <if test="updateUserName != null">
                update_user_name,
            </if>
            <if test="isDeleted != null">
                is_deleted,
            </if>
            <if test="status != null">
                status,
            </if>
            <if test="auditStatus != null">
                audit_status,
            </if>
            <if test="rebateSender != null">
                rebate_sender,
            </if>
            <if test="extRelationId != null">
                ext_relation_id,
            </if>
            <if test="extRelationName != null">
                ext_relation_name,
            </if>
            <if test="processDataFlag != null">
                process_data_flag,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="ownerType != null">
                #{ownerType,jdbcType=TINYINT},
            </if>
            <if test="ownerId != null">
                #{ownerId,jdbcType=VARCHAR},
            </if>
            <if test="ownerName != null">
                #{ownerName,jdbcType=VARCHAR},
            </if>
            <if test="activityId != null">
                #{activityId,jdbcType=INTEGER},
            </if>
            <if test="couponName != null">
                #{couponName,jdbcType=VARCHAR},
            </if>
            <if test="couponUseType != null">
                #{couponUseType,jdbcType=TINYINT},
            </if>
            <if test="couponNo != null">
                #{couponNo,jdbcType=VARCHAR},
            </if>
            <if test="price != null">
                #{price,jdbcType=DECIMAL},
            </if>
            <if test="couponPackageId != null">
                #{couponPackageId,jdbcType=INTEGER},
            </if>
            <if test="perPersonLimit != null">
                #{perPersonLimit,jdbcType=INTEGER},
            </if>
            <if test="perOrderLimit != null">
                #{perOrderLimit,jdbcType=INTEGER},
            </if>
            <if test="couponTypeId != null">
                #{couponTypeId,jdbcType=TINYINT},
            </if>
            <if test="startTime != null">
                #{startTime,jdbcType=TIMESTAMP},
            </if>
            <if test="endTime != null">
                #{endTime,jdbcType=TIMESTAMP},
            </if>
            <if test="pendingTime != null">
                #{pendingTime,jdbcType=TIMESTAMP},
            </if>
            <if test="isSharedSubpromotion != null">
                #{isSharedSubpromotion,jdbcType=BIT},
            </if>
            <if test="isSharedCoupon != null">
                #{isSharedCoupon,jdbcType=BIT},
            </if>
            <if test="redirectType != null">
                #{redirectType,jdbcType=TINYINT},
            </if>
            <if test="redirectUrl != null">
                #{redirectUrl,jdbcType=VARCHAR},
            </if>
            <if test="isMustApply != null">
                #{isMustApply,jdbcType=BIT},
            </if>
            <if test="affordCostType != null">
                #{affordCostType,jdbcType=TINYINT},
            </if>
            <if test="affordCostValue != null">
                #{affordCostValue,jdbcType=DECIMAL},
            </if>
            <if test="couponDispatchType != null">
                #{couponDispatchType,jdbcType=TINYINT},
            </if>
            <if test="issueStartTime != null">
                #{issueStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="issueEndTime != null">
                #{issueEndTime,jdbcType=TIMESTAMP},
            </if>
            <if test="issuedTotalAmount != null">
                #{issuedTotalAmount,jdbcType=INTEGER},
            </if>
            <if test="scopeType != null">
                #{scopeType,jdbcType=TINYINT},
            </if>
            <if test="promotionAmount != null">
                #{promotionAmount,jdbcType=DECIMAL},
            </if>
            <if test="orderFullAmount != null">
                #{orderFullAmount,jdbcType=DECIMAL},
            </if>
            <if test="promotionMaxAmount != null">
                #{promotionMaxAmount,jdbcType=DECIMAL},
            </if>
            <if test="discountAmount != null">
                #{discountAmount,jdbcType=DECIMAL},
            </if>
            <if test="giftName != null">
                #{giftName,jdbcType=VARCHAR},
            </if>
            <if test="promotionScopeAmount != null">
                #{promotionScopeAmount,jdbcType=VARCHAR},
            </if>
            <if test="applyAuditName != null">
                #{applyAuditName,jdbcType=VARCHAR},
            </if>
            <if test="applyAuditTime != null">
                #{applyAuditTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createUser != null">
                #{createUser,jdbcType=VARCHAR},
            </if>
            <if test="createUserName != null">
                #{createUserName,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateUser != null">
                #{updateUser,jdbcType=VARCHAR},
            </if>
            <if test="updateUserName != null">
                #{updateUserName,jdbcType=VARCHAR},
            </if>
            <if test="isDeleted != null">
                #{isDeleted,jdbcType=BIT},
            </if>
            <if test="status != null">
                #{status,jdbcType=TINYINT},
            </if>
            <if test="auditStatus != null">
                #{auditStatus,jdbcType=TINYINT},
            </if>
            <if test="rebateSender != null">
                #{rebateSender,jdbcType=TINYINT},
            </if>
            <if test="extRelationId != null">
                #{extRelationId,jdbcType=VARCHAR},
            </if>
            <if test="extRelationName != null">
                #{extRelationName,jdbcType=VARCHAR},
            </if>
            <if test="processDataFlag != null">
                #{processDataFlag,jdbcType=TINYINT},
            </if>
        </trim>
    </insert>
    <select id="countByExample" parameterType="com.yz.tc.model.CouponExample" resultType="java.lang.Integer">
        select count(*) from mmc_coupon
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </select>
    <update id="updateByExampleSelective" parameterType="map">
        update mmc_coupon
        <set>
            <if test="record.id != null">
                id = #{record.id,jdbcType=INTEGER},
            </if>
            <if test="record.ownerType != null">
                owner_type = #{record.ownerType,jdbcType=TINYINT},
            </if>
            <if test="record.ownerId != null">
                owner_id = #{record.ownerId,jdbcType=VARCHAR},
            </if>
            <if test="record.ownerName != null">
                owner_name = #{record.ownerName,jdbcType=VARCHAR},
            </if>
            <if test="record.activityId != null">
                activity_id = #{record.activityId,jdbcType=INTEGER},
            </if>
            <if test="record.couponName != null">
                coupon_name = #{record.couponName,jdbcType=VARCHAR},
            </if>
            <if test="record.couponUseType != null">
                coupon_use_type = #{record.couponUseType,jdbcType=TINYINT},
            </if>
            <if test="record.couponNo != null">
                coupon_no = #{record.couponNo,jdbcType=VARCHAR},
            </if>
            <if test="record.price != null">
                price = #{record.price,jdbcType=DECIMAL},
            </if>
            <if test="record.couponPackageId != null">
                coupon_package_id = #{record.couponPackageId,jdbcType=INTEGER},
            </if>
            <if test="record.perPersonLimit != null">
                per_person_limit = #{record.perPersonLimit,jdbcType=INTEGER},
            </if>
            <if test="record.perOrderLimit != null">
                per_order_limit = #{record.perOrderLimit,jdbcType=INTEGER},
            </if>
            <if test="record.couponTypeId != null">
                coupon_type_id = #{record.couponTypeId,jdbcType=TINYINT},
            </if>
            <if test="record.startTime != null">
                start_time = #{record.startTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.endTime != null">
                end_time = #{record.endTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.pendingTime != null">
                pending_time = #{record.pendingTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.isSharedSubpromotion != null">
                is_shared_subpromotion = #{record.isSharedSubpromotion,jdbcType=BIT},
            </if>
            <if test="record.isSharedCoupon != null">
                is_shared_coupon = #{record.isSharedCoupon,jdbcType=BIT},
            </if>
            <if test="record.redirectType != null">
                redirect_type = #{record.redirectType,jdbcType=TINYINT},
            </if>
            <if test="record.redirectUrl != null">
                redirect_url = #{record.redirectUrl,jdbcType=VARCHAR},
            </if>
            <if test="record.isMustApply != null">
                is_must_apply = #{record.isMustApply,jdbcType=BIT},
            </if>
            <if test="record.affordCostType != null">
                afford_cost_type = #{record.affordCostType,jdbcType=TINYINT},
            </if>
            <if test="record.affordCostValue != null">
                afford_cost_value = #{record.affordCostValue,jdbcType=DECIMAL},
            </if>
            <if test="record.couponDispatchType != null">
                coupon_dispatch_type = #{record.couponDispatchType,jdbcType=TINYINT},
            </if>
            <if test="record.issueStartTime != null">
                issue_start_time = #{record.issueStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.issueEndTime != null">
                issue_end_time = #{record.issueEndTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.issuedTotalAmount != null">
                issued_total_amount = #{record.issuedTotalAmount,jdbcType=INTEGER},
            </if>
            <if test="record.scopeType != null">
                scope_type = #{record.scopeType,jdbcType=TINYINT},
            </if>
            <if test="record.promotionAmount != null">
                promotion_amount = #{record.promotionAmount,jdbcType=DECIMAL},
            </if>
            <if test="record.orderFullAmount != null">
                order_full_amount = #{record.orderFullAmount,jdbcType=DECIMAL},
            </if>
            <if test="record.promotionMaxAmount != null">
                promotion_max_amount = #{record.promotionMaxAmount,jdbcType=DECIMAL},
            </if>
            <if test="record.discountAmount != null">
                discount_amount = #{record.discountAmount,jdbcType=DECIMAL},
            </if>
            <if test="record.giftName != null">
                gift_name = #{record.giftName,jdbcType=VARCHAR},
            </if>
            <if test="record.promotionScopeAmount != null">
                promotion_scope_amount = #{record.promotionScopeAmount,jdbcType=VARCHAR},
            </if>
            <if test="record.applyAuditName != null">
                apply_audit_name = #{record.applyAuditName,jdbcType=VARCHAR},
            </if>
            <if test="record.applyAuditTime != null">
                apply_audit_time = #{record.applyAuditTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.createTime != null">
                create_time = #{record.createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.createUser != null">
                create_user = #{record.createUser,jdbcType=VARCHAR},
            </if>
            <if test="record.createUserName != null">
                create_user_name = #{record.createUserName,jdbcType=VARCHAR},
            </if>
            <if test="record.updateTime != null">
                update_time = #{record.updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.updateUser != null">
                update_user = #{record.updateUser,jdbcType=VARCHAR},
            </if>
            <if test="record.updateUserName != null">
                update_user_name = #{record.updateUserName,jdbcType=VARCHAR},
            </if>
            <if test="record.isDeleted != null">
                is_deleted = #{record.isDeleted,jdbcType=BIT},
            </if>
            <if test="record.status != null">
                status = #{record.status,jdbcType=TINYINT},
            </if>
            <if test="record.auditStatus != null">
                audit_status = #{record.auditStatus,jdbcType=TINYINT},
            </if>
            <if test="record.rebateSender != null">
                rebate_sender = #{record.rebateSender,jdbcType=TINYINT},
            </if>
            <if test="record.extRelationId != null">
                ext_relation_id = #{record.extRelationId,jdbcType=VARCHAR},
            </if>
            <if test="record.extRelationName != null">
                ext_relation_name = #{record.extRelationName,jdbcType=VARCHAR},
            </if>
            <if test="record.processDataFlag != null">
                process_data_flag = #{record.processDataFlag,jdbcType=TINYINT},
            </if>
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByExample" parameterType="map">
        update mmc_coupon
        set id = #{record.id,jdbcType=INTEGER},
        owner_type = #{record.ownerType,jdbcType=TINYINT},
        owner_id = #{record.ownerId,jdbcType=VARCHAR},
        owner_name = #{record.ownerName,jdbcType=VARCHAR},
        activity_id = #{record.activityId,jdbcType=INTEGER},
        coupon_name = #{record.couponName,jdbcType=VARCHAR},
        coupon_use_type = #{record.couponUseType,jdbcType=TINYINT},
        coupon_no = #{record.couponNo,jdbcType=VARCHAR},
        price = #{record.price,jdbcType=DECIMAL},
        coupon_package_id = #{record.couponPackageId,jdbcType=INTEGER},
        per_person_limit = #{record.perPersonLimit,jdbcType=INTEGER},
        per_order_limit = #{record.perOrderLimit,jdbcType=INTEGER},
        coupon_type_id = #{record.couponTypeId,jdbcType=TINYINT},
        start_time = #{record.startTime,jdbcType=TIMESTAMP},
        end_time = #{record.endTime,jdbcType=TIMESTAMP},
        pending_time = #{record.pendingTime,jdbcType=TIMESTAMP},
        is_shared_subpromotion = #{record.isSharedSubpromotion,jdbcType=BIT},
        is_shared_coupon = #{record.isSharedCoupon,jdbcType=BIT},
        redirect_type = #{record.redirectType,jdbcType=TINYINT},
        redirect_url = #{record.redirectUrl,jdbcType=VARCHAR},
        is_must_apply = #{record.isMustApply,jdbcType=BIT},
        afford_cost_type = #{record.affordCostType,jdbcType=TINYINT},
        afford_cost_value = #{record.affordCostValue,jdbcType=DECIMAL},
        coupon_dispatch_type = #{record.couponDispatchType,jdbcType=TINYINT},
        issue_start_time = #{record.issueStartTime,jdbcType=TIMESTAMP},
        issue_end_time = #{record.issueEndTime,jdbcType=TIMESTAMP},
        issued_total_amount = #{record.issuedTotalAmount,jdbcType=INTEGER},
        scope_type = #{record.scopeType,jdbcType=TINYINT},
        promotion_amount = #{record.promotionAmount,jdbcType=DECIMAL},
        order_full_amount = #{record.orderFullAmount,jdbcType=DECIMAL},
        promotion_max_amount = #{record.promotionMaxAmount,jdbcType=DECIMAL},
        discount_amount = #{record.discountAmount,jdbcType=DECIMAL},
        gift_name = #{record.giftName,jdbcType=VARCHAR},
        promotion_scope_amount = #{record.promotionScopeAmount,jdbcType=VARCHAR},
        apply_audit_name = #{record.applyAuditName,jdbcType=VARCHAR},
        apply_audit_time = #{record.applyAuditTime,jdbcType=TIMESTAMP},
        create_time = #{record.createTime,jdbcType=TIMESTAMP},
        create_user = #{record.createUser,jdbcType=VARCHAR},
        create_user_name = #{record.createUserName,jdbcType=VARCHAR},
        update_time = #{record.updateTime,jdbcType=TIMESTAMP},
        update_user = #{record.updateUser,jdbcType=VARCHAR},
        update_user_name = #{record.updateUserName,jdbcType=VARCHAR},
        is_deleted = #{record.isDeleted,jdbcType=BIT},
        status = #{record.status,jdbcType=TINYINT},
        audit_status = #{record.auditStatus,jdbcType=TINYINT},
        rebate_sender = #{record.rebateSender,jdbcType=TINYINT},
        ext_relation_id = #{record.extRelationId,jdbcType=VARCHAR},
        ext_relation_name = #{record.extRelationName,jdbcType=VARCHAR},
        process_data_flag = #{record.processDataFlag,jdbcType=TINYINT}
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByPrimaryKeySelective" parameterType="com.yz.tc.model.Coupon">
        update mmc_coupon
        <set>
            <if test="ownerType != null">
                owner_type = #{ownerType,jdbcType=TINYINT},
            </if>
            <if test="ownerId != null">
                owner_id = #{ownerId,jdbcType=VARCHAR},
            </if>
            <if test="ownerName != null">
                owner_name = #{ownerName,jdbcType=VARCHAR},
            </if>
            <if test="activityId != null">
                activity_id = #{activityId,jdbcType=INTEGER},
            </if>
            <if test="couponName != null">
                coupon_name = #{couponName,jdbcType=VARCHAR},
            </if>
            <if test="couponUseType != null">
                coupon_use_type = #{couponUseType,jdbcType=TINYINT},
            </if>
            <if test="couponNo != null">
                coupon_no = #{couponNo,jdbcType=VARCHAR},
            </if>
            <if test="price != null">
                price = #{price,jdbcType=DECIMAL},
            </if>
            <if test="couponPackageId != null">
                coupon_package_id = #{couponPackageId,jdbcType=INTEGER},
            </if>
            <if test="perPersonLimit != null">
                per_person_limit = #{perPersonLimit,jdbcType=INTEGER},
            </if>
            <if test="perOrderLimit != null">
                per_order_limit = #{perOrderLimit,jdbcType=INTEGER},
            </if>
            <if test="couponTypeId != null">
                coupon_type_id = #{couponTypeId,jdbcType=TINYINT},
            </if>
            <if test="startTime != null">
                start_time = #{startTime,jdbcType=TIMESTAMP},
            </if>
            <if test="endTime != null">
                end_time = #{endTime,jdbcType=TIMESTAMP},
            </if>
            <if test="pendingTime != null">
                pending_time = #{pendingTime,jdbcType=TIMESTAMP},
            </if>
            <if test="isSharedSubpromotion != null">
                is_shared_subpromotion = #{isSharedSubpromotion,jdbcType=BIT},
            </if>
            <if test="isSharedCoupon != null">
                is_shared_coupon = #{isSharedCoupon,jdbcType=BIT},
            </if>
            <if test="redirectType != null">
                redirect_type = #{redirectType,jdbcType=TINYINT},
            </if>
            <if test="redirectUrl != null">
                redirect_url = #{redirectUrl,jdbcType=VARCHAR},
            </if>
            <if test="isMustApply != null">
                is_must_apply = #{isMustApply,jdbcType=BIT},
            </if>
            <if test="affordCostType != null">
                afford_cost_type = #{affordCostType,jdbcType=TINYINT},
            </if>
            <if test="affordCostValue != null">
                afford_cost_value = #{affordCostValue,jdbcType=DECIMAL},
            </if>
            <if test="couponDispatchType != null">
                coupon_dispatch_type = #{couponDispatchType,jdbcType=TINYINT},
            </if>
            <if test="issueStartTime != null">
                issue_start_time = #{issueStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="issueEndTime != null">
                issue_end_time = #{issueEndTime,jdbcType=TIMESTAMP},
            </if>
            <if test="issuedTotalAmount != null">
                issued_total_amount = #{issuedTotalAmount,jdbcType=INTEGER},
            </if>
            <if test="scopeType != null">
                scope_type = #{scopeType,jdbcType=TINYINT},
            </if>
            <if test="promotionAmount != null">
                promotion_amount = #{promotionAmount,jdbcType=DECIMAL},
            </if>
            <if test="orderFullAmount != null">
                order_full_amount = #{orderFullAmount,jdbcType=DECIMAL},
            </if>
            <if test="promotionMaxAmount != null">
                promotion_max_amount = #{promotionMaxAmount,jdbcType=DECIMAL},
            </if>
            <if test="discountAmount != null">
                discount_amount = #{discountAmount,jdbcType=DECIMAL},
            </if>
            <if test="giftName != null">
                gift_name = #{giftName,jdbcType=VARCHAR},
            </if>
            <if test="promotionScopeAmount != null">
                promotion_scope_amount = #{promotionScopeAmount,jdbcType=VARCHAR},
            </if>
            <if test="applyAuditName != null">
                apply_audit_name = #{applyAuditName,jdbcType=VARCHAR},
            </if>
            <if test="applyAuditTime != null">
                apply_audit_time = #{applyAuditTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createUser != null">
                create_user = #{createUser,jdbcType=VARCHAR},
            </if>
            <if test="createUserName != null">
                create_user_name = #{createUserName,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateUser != null">
                update_user = #{updateUser,jdbcType=VARCHAR},
            </if>
            <if test="updateUserName != null">
                update_user_name = #{updateUserName,jdbcType=VARCHAR},
            </if>
            <if test="isDeleted != null">
                is_deleted = #{isDeleted,jdbcType=BIT},
            </if>
            <if test="status != null">
                status = #{status,jdbcType=TINYINT},
            </if>
            <if test="auditStatus != null">
                audit_status = #{auditStatus,jdbcType=TINYINT},
            </if>
            <if test="rebateSender != null">
                rebate_sender = #{rebateSender,jdbcType=TINYINT},
            </if>
            <if test="extRelationId != null">
                ext_relation_id = #{extRelationId,jdbcType=VARCHAR},
            </if>
            <if test="extRelationName != null">
                ext_relation_name = #{extRelationName,jdbcType=VARCHAR},
            </if>
            <if test="processDataFlag != null">
                process_data_flag = #{processDataFlag,jdbcType=TINYINT},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.yz.tc.model.Coupon">
    update mmc_coupon
    set owner_type = #{ownerType,jdbcType=TINYINT},
      owner_id = #{ownerId,jdbcType=VARCHAR},
      owner_name = #{ownerName,jdbcType=VARCHAR},
      activity_id = #{activityId,jdbcType=INTEGER},
      coupon_name = #{couponName,jdbcType=VARCHAR},
      coupon_use_type = #{couponUseType,jdbcType=TINYINT},
      coupon_no = #{couponNo,jdbcType=VARCHAR},
      price = #{price,jdbcType=DECIMAL},
      coupon_package_id = #{couponPackageId,jdbcType=INTEGER},
      per_person_limit = #{perPersonLimit,jdbcType=INTEGER},
      per_order_limit = #{perOrderLimit,jdbcType=INTEGER},
      coupon_type_id = #{couponTypeId,jdbcType=TINYINT},
      start_time = #{startTime,jdbcType=TIMESTAMP},
      end_time = #{endTime,jdbcType=TIMESTAMP},
      pending_time = #{pendingTime,jdbcType=TIMESTAMP},
      is_shared_subpromotion = #{isSharedSubpromotion,jdbcType=BIT},
      is_shared_coupon = #{isSharedCoupon,jdbcType=BIT},
      redirect_type = #{redirectType,jdbcType=TINYINT},
      redirect_url = #{redirectUrl,jdbcType=VARCHAR},
      is_must_apply = #{isMustApply,jdbcType=BIT},
      afford_cost_type = #{affordCostType,jdbcType=TINYINT},
      afford_cost_value = #{affordCostValue,jdbcType=DECIMAL},
      coupon_dispatch_type = #{couponDispatchType,jdbcType=TINYINT},
      issue_start_time = #{issueStartTime,jdbcType=TIMESTAMP},
      issue_end_time = #{issueEndTime,jdbcType=TIMESTAMP},
      issued_total_amount = #{issuedTotalAmount,jdbcType=INTEGER},
      scope_type = #{scopeType,jdbcType=TINYINT},
      promotion_amount = #{promotionAmount,jdbcType=DECIMAL},
      order_full_amount = #{orderFullAmount,jdbcType=DECIMAL},
      promotion_max_amount = #{promotionMaxAmount,jdbcType=DECIMAL},
      discount_amount = #{discountAmount,jdbcType=DECIMAL},
      gift_name = #{giftName,jdbcType=VARCHAR},
      promotion_scope_amount = #{promotionScopeAmount,jdbcType=VARCHAR},
      apply_audit_name = #{applyAuditName,jdbcType=VARCHAR},
      apply_audit_time = #{applyAuditTime,jdbcType=TIMESTAMP},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      create_user = #{createUser,jdbcType=VARCHAR},
      create_user_name = #{createUserName,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      update_user = #{updateUser,jdbcType=VARCHAR},
      update_user_name = #{updateUserName,jdbcType=VARCHAR},
      is_deleted = #{isDeleted,jdbcType=BIT},
      status = #{status,jdbcType=TINYINT},
      audit_status = #{auditStatus,jdbcType=TINYINT},
      rebate_sender = #{rebateSender,jdbcType=TINYINT},
      ext_relation_id = #{extRelationId,jdbcType=VARCHAR},
      ext_relation_name = #{extRelationName,jdbcType=VARCHAR},
      process_data_flag = #{processDataFlag,jdbcType=TINYINT}
    where id = #{id,jdbcType=INTEGER}
  </update>

    <!--  -->
    <update id="logicalDeleteByPrimaryKey">
		UPDATE mmc_coupon
		SET
    		update_time = #{updateTime,jdbcType=TIMESTAMP},
    		update_user = #{updateUser,jdbcType=VARCHAR},
			update_user_name = #{updateUserName,jdbcType=VARCHAR},
            is_deleted=1
	    WHERE id = #{id,jdbcType=INTEGER} 
	</update>

    <select id="selectByPrimaryKeyForUpdate" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        SELECT
        <include refid="Base_Column_List"/>
        FROM mmc_coupon
        WHERE id = #{id,jdbcType=INTEGER}
        FOR UPDATE
    </select>

    <select id="queryCoupon" resultMap="BaseResultMap" parameterType="com.yz.tc.req.CouponQueryVO">
        SELECT
        <choose>
            <when test="returnFields!=null">${returnFields}</when>
            <otherwise>
                <include refid="Base_Column_List"/>
            </otherwise>
        </choose>
        FROM mmc_coupon
        <where>
            <if test="id!=null">AND id = #{id,jdbcType=INTEGER}</if>
            <if test="idList != null and idList.size > 0">
                <foreach item="item" separator="," open="AND id in (" close=")" collection="idList">
                    #{item,jdbcType=INTEGER}
                </foreach>
            </if>
            <if test="ownerType!=null">AND owner_type = #{ownerType,jdbcType=TINYINT}</if>
            <if test="ownerTypeList != null and ownerTypeList.size > 0">
                <foreach item="item" separator="," open="AND owner_type in (" close=")" collection="ownerTypeList">
                    #{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="ownerId!=null and ownerId!=''">AND owner_id = #{ownerId,jdbcType=VARCHAR}</if>
            <if test="ownerIdLike != null and ownerIdLike != '' ">AND owner_id LIKE
                concat(#{ownerIdLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="ownerName!=null and ownerName!=''">AND owner_name = #{ownerName,jdbcType=VARCHAR}</if>
            <if test="ownerNameLike != null and ownerNameLike != '' ">AND owner_name LIKE
                concat(#{ownerNameLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="activityId!=null">AND activity_id = #{activityId,jdbcType=INTEGER}</if>
            <if test="activityIdList != null and activityIdList.size > 0">
                <foreach item="item" separator="," open="AND activity_id in (" close=")" collection="activityIdList">
                    #{item,jdbcType=INTEGER}
                </foreach>
            </if>
            <if test="couponName!=null and couponName!=''">AND coupon_name = #{couponName,jdbcType=VARCHAR}</if>
            <if test="couponNameLike != null and couponNameLike != '' ">AND coupon_name LIKE
                concat(#{couponNameLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="couponUseType!=null">AND coupon_use_type = #{couponUseType,jdbcType=TINYINT}</if>
            <if test="couponUseTypeList != null and couponUseTypeList.size > 0">
                <foreach item="item" separator="," open="AND coupon_use_type in (" close=")"
                         collection="couponUseTypeList">#{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="couponNo!=null and couponNo!=''">AND coupon_no = #{couponNo,jdbcType=VARCHAR}</if>
            <if test="couponNoLike != null and couponNoLike != '' ">AND coupon_no LIKE
                concat(#{couponNoLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="couponNoList != null and couponNoList.size > 0">
                <foreach item="item" separator="," open="AND coupon_no in (" close=")" collection="couponNoList">
                    #{item,jdbcType=VARCHAR}
                </foreach>
            </if>
            <if test="priceFrom != null"><![CDATA[AND price >= #{priceFrom,jdbcType=DECIMAL}]]></if>
            <if test="priceTo != null"><![CDATA[AND price <= #{priceTo,jdbcType=DECIMAL}]]></if>
            <if test="couponPackageId!=null">AND coupon_package_id = #{couponPackageId,jdbcType=INTEGER}</if>
            <if test="couponPackageIdList != null and couponPackageIdList.size > 0">
                <foreach item="item" separator="," open="AND coupon_package_id in (" close=")"
                         collection="couponPackageIdList">#{item,jdbcType=INTEGER}
                </foreach>
            </if>
            <if test="perPersonLimit!=null">AND per_person_limit = #{perPersonLimit,jdbcType=INTEGER}</if>
            <if test="perPersonLimitList != null and perPersonLimitList.size > 0">
                <foreach item="item" separator="," open="AND per_person_limit in (" close=")"
                         collection="perPersonLimitList">#{item,jdbcType=INTEGER}
                </foreach>
            </if>
            <if test="perOrderLimit!=null">AND per_order_limit = #{perOrderLimit,jdbcType=INTEGER}</if>
            <if test="perOrderLimitList != null and perOrderLimitList.size > 0">
                <foreach item="item" separator="," open="AND per_order_limit in (" close=")"
                         collection="perOrderLimitList">#{item,jdbcType=INTEGER}
                </foreach>
            </if>
            <if test="couponTypeId!=null">AND coupon_type_id = #{couponTypeId,jdbcType=TINYINT}</if>
            <if test="couponTypeIdList != null and couponTypeIdList.size > 0">
                <foreach item="item" separator="," open="AND coupon_type_id in (" close=")"
                         collection="couponTypeIdList">#{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="startTimeFrom != null"><![CDATA[AND start_time >= #{startTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="startTimeTo != null"><![CDATA[AND start_time <= #{startTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="endTimeFrom != null"><![CDATA[AND end_time >= #{endTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="endTimeTo != null"><![CDATA[AND end_time <= #{endTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="pendingTimeFrom != null">
                <![CDATA[AND pending_time >= #{pendingTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="pendingTimeTo != null"><![CDATA[AND pending_time <= #{pendingTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="isSharedSubpromotion!=null">AND is_shared_subpromotion =
                #{isSharedSubpromotion,jdbcType=BOOLEAN}
            </if>
            <if test="isSharedSubpromotionList != null and isSharedSubpromotionList.size > 0">
                <foreach item="item" separator="," open="AND is_shared_subpromotion in (" close=")"
                         collection="isSharedSubpromotionList">#{item,jdbcType=BOOLEAN}
                </foreach>
            </if>
            <if test="isSharedCoupon!=null">AND is_shared_coupon = #{isSharedCoupon,jdbcType=BOOLEAN}</if>
            <if test="isSharedCouponList != null and isSharedCouponList.size > 0">
                <foreach item="item" separator="," open="AND is_shared_coupon in (" close=")"
                         collection="isSharedCouponList">#{item,jdbcType=BOOLEAN}
                </foreach>
            </if>
            <if test="redirectType!=null">AND redirect_type = #{redirectType,jdbcType=TINYINT}</if>
            <if test="redirectTypeList != null and redirectTypeList.size > 0">
                <foreach item="item" separator="," open="AND redirect_type in (" close=")"
                         collection="redirectTypeList">#{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="isMustApply!=null">AND is_must_apply = #{isMustApply,jdbcType=BOOLEAN}</if>
            <if test="isMustApplyList != null and isMustApplyList.size > 0">
                <foreach item="item" separator="," open="AND is_must_apply in (" close=")" collection="isMustApplyList">
                    #{item,jdbcType=BOOLEAN}
                </foreach>
            </if>
            <if test="affordCostType!=null">AND afford_cost_type = #{affordCostType,jdbcType=TINYINT}</if>
            <if test="affordCostTypeList != null and affordCostTypeList.size > 0">
                <foreach item="item" separator="," open="AND afford_cost_type in (" close=")"
                         collection="affordCostTypeList">#{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="affordCostValueFrom != null">
                <![CDATA[AND afford_cost_value >= #{affordCostValueFrom,jdbcType=DECIMAL}]]></if>
            <if test="affordCostValueTo != null">
                <![CDATA[AND afford_cost_value <= #{affordCostValueTo,jdbcType=DECIMAL}]]></if>
            <if test="couponDispatchType!=null">AND coupon_dispatch_type = #{couponDispatchType,jdbcType=TINYINT}</if>
            <if test="couponDispatchTypeList != null and couponDispatchTypeList.size > 0">
                <foreach item="item" separator="," open="AND coupon_dispatch_type in (" close=")"
                         collection="couponDispatchTypeList">#{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="issueStartTimeFrom != null">
                <![CDATA[AND issue_start_time >= #{issueStartTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="issueStartTimeTo != null">
                <![CDATA[AND issue_start_time <= #{issueStartTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="issueEndTimeFrom != null">
                <![CDATA[AND issue_end_time >= #{issueEndTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="issueEndTimeTo != null">
                <![CDATA[AND issue_end_time <= #{issueEndTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="issuedTotalAmount!=null">AND issued_total_amount = #{issuedTotalAmount,jdbcType=INTEGER}</if>
            <if test="issuedTotalAmountList != null and issuedTotalAmountList.size > 0">
                <foreach item="item" separator="," open="AND issued_total_amount in (" close=")"
                         collection="issuedTotalAmountList">#{item,jdbcType=INTEGER}
                </foreach>
            </if>
            <if test="scopeType!=null">AND scope_type = #{scopeType,jdbcType=TINYINT}</if>
            <if test="scopeTypeList != null and scopeTypeList.size > 0">
                <foreach item="item" separator="," open="AND scope_type in (" close=")" collection="scopeTypeList">
                    #{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="promotionAmountFrom != null">
                <![CDATA[AND promotion_amount >= #{promotionAmountFrom,jdbcType=DECIMAL}]]></if>
            <if test="promotionAmountTo != null">
                <![CDATA[AND promotion_amount <= #{promotionAmountTo,jdbcType=DECIMAL}]]></if>
            <if test="orderFullAmountFrom != null">
                <![CDATA[AND order_full_amount >= #{orderFullAmountFrom,jdbcType=DECIMAL}]]></if>
            <if test="orderFullAmountTo != null">
                <![CDATA[AND order_full_amount <= #{orderFullAmountTo,jdbcType=DECIMAL}]]></if>
            <if test="promotionMaxAmountFrom != null">
                <![CDATA[AND promotion_max_amount >= #{promotionMaxAmountFrom,jdbcType=DECIMAL}]]></if>
            <if test="promotionMaxAmountTo != null">
                <![CDATA[AND promotion_max_amount <= #{promotionMaxAmountTo,jdbcType=DECIMAL}]]></if>
            <if test="discountAmountFrom != null">
                <![CDATA[AND discount_amount >= #{discountAmountFrom,jdbcType=DECIMAL}]]></if>
            <if test="discountAmountTo != null">
                <![CDATA[AND discount_amount <= #{discountAmountTo,jdbcType=DECIMAL}]]></if>
            <if test="giftName!=null and giftName!=''">AND gift_name = #{giftName,jdbcType=VARCHAR}</if>
            <if test="giftNameLike != null and giftNameLike != '' ">AND gift_name LIKE
                concat(#{giftNameLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="applyAuditName!=null and applyAuditName!=''">AND apply_audit_name =
                #{applyAuditName,jdbcType=VARCHAR}
            </if>
            <if test="applyAuditNameLike != null and applyAuditNameLike != '' ">AND apply_audit_name LIKE
                concat(#{applyAuditNameLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="applyAuditTimeFrom != null">
                <![CDATA[AND apply_audit_time >= #{applyAuditTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="applyAuditTimeTo != null">
                <![CDATA[AND apply_audit_time <= #{applyAuditTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="createTimeFrom != null"><![CDATA[AND create_time >= #{createTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="createTimeTo != null"><![CDATA[AND create_time <= #{createTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="createUser!=null and createUser!=''">AND create_user = #{createUser,jdbcType=VARCHAR}</if>
            <if test="createUserLike != null and createUserLike != '' ">AND create_user LIKE
                concat(#{createUserLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="createUserName!=null and createUserName!=''">AND create_user_name =
                #{createUserName,jdbcType=VARCHAR}
            </if>
            <if test="createUserNameLike != null and createUserNameLike != '' ">AND create_user_name LIKE
                concat(#{createUserNameLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="updateTimeFrom != null"><![CDATA[AND update_time >= #{updateTimeFrom,jdbcType=TIMESTAMP}]]></if>
            <if test="updateTimeTo != null"><![CDATA[AND update_time <= #{updateTimeTo,jdbcType=TIMESTAMP}]]></if>
            <if test="updateUser!=null and updateUser!=''">AND update_user = #{updateUser,jdbcType=VARCHAR}</if>
            <if test="updateUserLike != null and updateUserLike != '' ">AND update_user LIKE
                concat(#{updateUserLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="updateUserName!=null and updateUserName!=''">AND update_user_name =
                #{updateUserName,jdbcType=VARCHAR}
            </if>
            <if test="updateUserNameLike != null and updateUserNameLike != '' ">AND update_user_name LIKE
                concat(#{updateUserNameLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="isDeleted!=null">AND is_deleted = #{isDeleted,jdbcType=BOOLEAN}</if>
            <if test="isDeletedList != null and isDeletedList.size > 0">
                <foreach item="item" separator="," open="AND is_deleted in (" close=")" collection="isDeletedList">
                    #{item,jdbcType=BOOLEAN}
                </foreach>
            </if>
            <if test="status!=null">AND status = #{status,jdbcType=TINYINT}</if>
            <if test="statusList != null and statusList.size > 0">
                <foreach item="item" separator="," open="AND status in (" close=")" collection="statusList">
                    #{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="auditStatus!=null">AND audit_status = #{auditStatus,jdbcType=TINYINT}</if>
            <if test="auditStatusList != null and auditStatusList.size > 0">
                <foreach item="item" separator="," open="AND audit_status in (" close=")" collection="auditStatusList">
                    #{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="rebateSender!=null">AND rebate_sender = #{rebateSender,jdbcType=TINYINT}</if>
            <if test="rebateSenderList != null and rebateSenderList.size > 0">
                <foreach item="item" separator="," open="AND rebate_sender in (" close=")"
                         collection="rebateSenderList">#{item,jdbcType=TINYINT}
                </foreach>
            </if>
            <if test="extRelationId!=null and extRelationId!=''">AND ext_relation_id =
                #{extRelationId,jdbcType=VARCHAR}
            </if>
            <if test="extRelationIdLike != null and extRelationIdLike != '' ">AND ext_relation_id LIKE
                concat(#{extRelationIdLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="extRelationIdList != null and extRelationIdList.size > 0">
                <foreach item="item" separator="," open="AND ext_relation_id in (" close=")"
                         collection="extRelationIdList">#{item,jdbcType=VARCHAR}
                </foreach>
            </if>
            <if test="extRelationName!=null and extRelationName!=''">AND ext_relation_name =
                #{extRelationName,jdbcType=VARCHAR}
            </if>
            <if test="extRelationNameLike != null and extRelationNameLike != '' ">AND ext_relation_name LIKE
                concat(#{extRelationNameLike,jdbcType=VARCHAR},'%')
            </if>
            <if test="extRelationNameList != null and extRelationNameList.size > 0">
                <foreach item="item" separator="," open="AND ext_relation_name in (" close=")"
                         collection="extRelationNameList">#{item,jdbcType=VARCHAR}
                </foreach>
            </if>
            <if test="processDataFlag!=null">AND process_data_flag = #{processDataFlag,jdbcType=TINYINT}</if>
            <if test="processDataFlagList != null and processDataFlagList.size > 0">
                <foreach item="item" separator="," open="AND process_data_flag in (" close=")"
                         collection="processDataFlagList">#{item,jdbcType=TINYINT}
                </foreach>
            </if>
        </where>
        <choose>
            <when test="order!=null and orderBy!=null and order!='' and orderBy!=''">order by ${orderBy} ${order}</when>
            <otherwise>order by id desc</otherwise>
        </choose>
    </select>
</mapper>